---
import Layout from "../layouts/Layout.astro";
import NavBar from "../components/NavBar.astro";
import MapsExporterApp from "../components/maps/MapsExporterApp.tsx";

const BUILD_SHA = import.meta.env.PUBLIC_BUILD_SHA ?? "";
const BUILD_SHORT = BUILD_SHA ? BUILD_SHA.slice(0, 7) : "dev";
const REPO_URL = "https://github.com/anonomi-org/anonomi.github.io";
const COMMIT_URL = BUILD_SHA ? `${REPO_URL}/commit/${BUILD_SHA}` : REPO_URL;
---

<Layout
  title="Anonomi • Maps Exporter"
  description="Generate offline tile packs locally in your browser.">

  <NavBar />

    <main class="mx-auto max-w-6xl px-6 py-16">
    <!-- HERO / INTRO BOX -->
    <section class="relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-12">
        <div class="absolute inset-0 -z-10 bg-gradient-to-b from-white/10 via-transparent to-transparent"></div>

        <div class="max-w-3xl">
        <p class="text-xs font-semibold tracking-widest text-zinc-400">
            OFFLINE MAPS • LOCAL EXPORT • NO SERVER WORK
        </p>

        <h1 class="mt-6 text-4xl font-semibold tracking-tight sm:text-5xl">
            Maps Exporter (beta)
        </h1>

        <p class="mt-4 text-zinc-300">
            Select an area, pick zoom levels, and export a tile pack locally. No uploads. No accounts.
        </p>

        <p class="mt-4 text-zinc-300">
            ⓘ Before using this tool, read about
            <a
            href="#maps-exporter-disclaimer"
            class="font-semibold text-zinc-100 hover:text-white"
            >
            transparency & network behavior
            </a>.
        </p>
        </div>
    </section>

    <div class="mt-8 sm:mt-12">
        <MapsExporterApp client:only="react" />
    </div>

    <!-- Maps Exporter disclaimer -->
    <div
    id="maps-exporter-disclaimer"
    class="mt-12 rounded-xl border border-white/10 bg-black/10 p-4 text-xs text-zinc-400"
    >
    <h2 class="text-xs font-semibold uppercase tracking-wide text-zinc-300">
        Transparency & network behavior
    </h2>

    <p class="mt-2">
        Maps Exporter ships with all application code and dependencies bundled locally.
        No third-party scripts, styles, analytics, or background requests are loaded at runtime.
    </p>

    <p class="mt-2">
        Map tile sources are contacted <span class="text-zinc-200">only after you explicitly select one</span>.
        Requests are made directly by your browser.
        When accessed over Tor, this may involve Tor exit traffic unless an onion-based tile source is used.
    </p>

    <p class="mt-2">
        Maps Exporter is <span class="text-zinc-200">free and open source software</span>.
        You are encouraged to inspect, audit, and build it yourself.
    </p>

    <p class="mt-2">
        Anonomi does not operate, control, or audit third-party tile servers.
        You are responsible for selecting map sources that match your privacy,
        trust, and operational security requirements.
    </p>

    <div class="mt-3 flex flex-col gap-1 sm:flex-row sm:gap-4">
        <a
        href="/docs/maps-exporter"
        class="font-semibold text-zinc-200 hover:text-white"
        >
        Read documentation →
        </a>

        <a
        href="https://github.com/anonomi-org/anonomi.github.io"
        class="font-semibold text-zinc-200 hover:text-white"
        target="_blank"
        rel="noopener noreferrer"
        >
        View source code →
        </a>
    </div>

    
    </div>

    <footer class="mt-16 border-t border-white/10 pt-10 text-sm text-zinc-500">
        <div class="mx-auto max-w-6xl px-6">
            <!-- Row 1: URLs -->
            <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
            <div>
                <div class="text-xs font-semibold tracking-wide text-zinc-300">
                Onion Website
                </div>
                <div class="mt-1 font-mono text-[11px] text-zinc-400 break-all">
                http://ucvmhctoq76k6qrdrvblxspjpk5rpjutsfe6nxyhgmvx25vruohxrnqd.onion/
                </div>
            </div>

            <div>
                <div class="text-xs font-semibold tracking-wide text-zinc-300">
                Onion Code Repo
                </div>
                <div class="mt-1 font-mono text-[11px] text-zinc-400 break-all">
                http://yexg75vnfxe2q6yygn7csmqdx5mtwmvhrqpboopisvjqz7haras3skid.onion/anonomi-org/anonomi-android
                </div>
            </div>

            <div>
                <div class="text-xs font-semibold tracking-wide text-zinc-300">
                ClearNet Website
                </div>
                <div class="mt-1 font-mono text-[11px] text-zinc-400 break-all">
                https://anonomi.org
                </div>
            </div>

            <div>
                <div class="text-xs font-semibold tracking-wide text-zinc-300">
                ClearNet Repo (GitHub)
                </div>
                <div class="mt-1 font-mono text-[11px] text-zinc-400 break-all">
                https://github.com/anonomi-org/anonomi-android
                </div>
            </div>
            </div>

            <div class="mt-6 border-t border-white/10 pt-4 text-zinc-500 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <div>© {new Date().getFullYear()} Anonomi • No trackers • No analytics • No cookies</div>
            <div class="font-mono text-[11px] text-zinc-500">
                Build: <a href={COMMIT_URL} class="text-zinc-300 hover:text-white">{BUILD_SHORT}</a>
            </div>
            </div>
        </div>
        </footer>
  </main>
</Layout>